{% load i18n %}
<script type="text/javascript" src="{{spec.STATIC_URL}}large_data_admin/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
function select_input(id, selected_id, field, url, min_length, callback){
    $("#"+id).keyup(function() {
        if ($("#"+id).val().length > min_length - 1){
            $.get(url+"?q="+$("#"+id).val()+"&s="+$("#"+selected_id).val(), function (d){
                d = JSON.parse(d);
                $("#"+id+"_list").empty();
                d.forEach(function (i) {
                    $("#"+id+"_list").append("<li><a href=\"?"+field+"="+i[2]+"\" >"+i[1]+"</a></li>");
                    $("#"+id+i[0]).click(function(){
                        $("#"+id+"_list").empty();
                        $("#"+id).val("");
                        callback(i);
                    })
                })
            })
        }
    })
}

$(document).ready(function(){

    select_input("{{spec.random}}_add", "", "{{spec.field}}", "/large_data_admin/filter/{{spec.model}}/{{spec.field}}/", 2, function (i){
    });
})
</script>

<h3>{% blocktrans with filter_title=title %} By {{ filter_title }} {% endblocktrans %}</h3>
<input type="text" id="{{spec.random}}_add">
<a onclick="$('#{{spec.random}}_add_list').html('');$('#{{spec.random}}_add').val('')">x</a>
<ul id="{{spec.random}}_add_list">
</ul>